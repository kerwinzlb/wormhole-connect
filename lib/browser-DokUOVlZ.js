"use strict";const U=require("./index-BMvV5qga.js"),De=require("./index-CWC2oqXK.js");function Mr(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Nr(e,r){r||(r=e.reduce((o,b)=>o+b.length,0));const n=Mr(r);let c=0;for(const o of e)n.set(o,c),c+=o.length;return n}const pr={...De.identityBase,...De.base2,...De.base8,...De.base10,...De.base16,...De.base32,...De.base36,...De.base58,...De.base64,...De.base256emoji};function Br(e,r,n,c){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:n},decoder:{decode:c}}}const _r=Br("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),qt=Br("ascii","a",e=>{let r="a";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return r},e=>{e=e.substring(1);const r=Mr(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}),Dr={utf8:_r,"utf-8":_r,hex:pr.base16,latin1:qt,ascii:qt,binary:qt,...pr};function Ft(e,r="utf8"){const n=Dr[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):n.decoder.decode(`${n.prefix}${e}`)}function Jt(e,r="utf8"){const n=Dr[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const kn={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Wn=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,qn=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Vn=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Yn(e,r){if(e==="__proto__"||e==="constructor"&&r&&typeof r=="object"&&"prototype"in r){Xn(e);return}return r}function Xn(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Bt(e,r={}){if(typeof e!="string")return e;const n=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return n.slice(1,-1);if(n.length<=9){const c=n.toLowerCase();if(c==="true")return!0;if(c==="false")return!1;if(c==="undefined")return;if(c==="null")return null;if(c==="nan")return Number.NaN;if(c==="infinity")return Number.POSITIVE_INFINITY;if(c==="-infinity")return Number.NEGATIVE_INFINITY}if(!Vn.test(e)){if(r.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Wn.test(e)||qn.test(e)){if(r.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Yn)}return JSON.parse(e)}catch(c){if(r.strict)throw c;return e}}function Zn(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function Te(e,...r){try{return Zn(e(...r))}catch(n){return Promise.reject(n)}}function Qn(e){const r=typeof e;return e===null||r!=="object"&&r!=="function"}function ei(e){const r=Object.getPrototypeOf(e);return!r||r.isPrototypeOf(Object)}function Ut(e){if(Qn(e))return String(e);if(ei(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Ut(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function zr(){if(typeof U.dist.Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Xt="base64:";function ti(e){if(typeof e=="string")return e;zr();const r=U.dist.Buffer.from(e).toString("base64");return Xt+r}function ri(e){return typeof e!="string"||!e.startsWith(Xt)?e:(zr(),U.dist.Buffer.from(e.slice(Xt.length),"base64"))}function He(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function ni(...e){return He(e.join(":"))}function Dt(e){return e=He(e),e?e+":":""}const ii="memory",si=()=>{const e=new Map;return{name:ii,options:{},hasItem(r){return e.has(r)},getItem(r){return e.get(r)??null},getItemRaw(r){return e.get(r)??null},setItem(r,n){e.set(r,n)},setItemRaw(r,n){e.set(r,n)},removeItem(r){e.delete(r)},getKeys(){return Array.from(e.keys())},clear(){e.clear()},dispose(){e.clear()}}};function oi(e={}){const r={mounts:{"":e.driver||si()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=s=>{for(const u of r.mountpoints)if(s.startsWith(u))return{base:u,relativeKey:s.slice(u.length),driver:r.mounts[u]};return{base:"",relativeKey:s,driver:r.mounts[""]}},c=(s,u)=>r.mountpoints.filter(g=>g.startsWith(s)||u&&s.startsWith(g)).map(g=>({relativeBase:s.length>g.length?s.slice(g.length):void 0,mountpoint:g,driver:r.mounts[g]})),o=(s,u)=>{if(r.watching){u=He(u);for(const g of r.watchListeners)g(s,u)}},b=async()=>{if(!r.watching){r.watching=!0;for(const s in r.mounts)r.unwatch[s]=await xr(r.mounts[s],o,s)}},S=async()=>{if(r.watching){for(const s in r.unwatch)await r.unwatch[s]();r.unwatch={},r.watching=!1}},E=(s,u,g)=>{const m=new Map,w=v=>{let M=m.get(v.base);return M||(M={driver:v.driver,base:v.base,items:[]},m.set(v.base,M)),M};for(const v of s){const M=typeof v=="string",W=He(M?v:v.key),Y=M?void 0:v.value,N=M||!v.options?u:{...u,...v.options},Le=n(W);w(Le).items.push({key:W,value:Y,relativeKey:Le.relativeKey,options:N})}return Promise.all([...m.values()].map(v=>g(v))).then(v=>v.flat())},y={hasItem(s,u={}){s=He(s);const{relativeKey:g,driver:m}=n(s);return Te(m.hasItem,g,u)},getItem(s,u={}){s=He(s);const{relativeKey:g,driver:m}=n(s);return Te(m.getItem,g,u).then(w=>Bt(w))},getItems(s,u){return E(s,u,g=>g.driver.getItems?Te(g.driver.getItems,g.items.map(m=>({key:m.relativeKey,options:m.options})),u).then(m=>m.map(w=>({key:ni(g.base,w.key),value:Bt(w.value)}))):Promise.all(g.items.map(m=>Te(g.driver.getItem,m.relativeKey,m.options).then(w=>({key:m.key,value:Bt(w)})))))},getItemRaw(s,u={}){s=He(s);const{relativeKey:g,driver:m}=n(s);return m.getItemRaw?Te(m.getItemRaw,g,u):Te(m.getItem,g,u).then(w=>ri(w))},async setItem(s,u,g={}){if(u===void 0)return y.removeItem(s);s=He(s);const{relativeKey:m,driver:w}=n(s);w.setItem&&(await Te(w.setItem,m,Ut(u),g),w.watch||o("update",s))},async setItems(s,u){await E(s,u,async g=>{if(g.driver.setItems)return Te(g.driver.setItems,g.items.map(m=>({key:m.relativeKey,value:Ut(m.value),options:m.options})),u);g.driver.setItem&&await Promise.all(g.items.map(m=>Te(g.driver.setItem,m.relativeKey,Ut(m.value),m.options)))})},async setItemRaw(s,u,g={}){if(u===void 0)return y.removeItem(s,g);s=He(s);const{relativeKey:m,driver:w}=n(s);if(w.setItemRaw)await Te(w.setItemRaw,m,u,g);else if(w.setItem)await Te(w.setItem,m,ti(u),g);else return;w.watch||o("update",s)},async removeItem(s,u={}){typeof u=="boolean"&&(u={removeMeta:u}),s=He(s);const{relativeKey:g,driver:m}=n(s);m.removeItem&&(await Te(m.removeItem,g,u),(u.removeMeta||u.removeMata)&&await Te(m.removeItem,g+"$",u),m.watch||o("remove",s))},async getMeta(s,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),s=He(s);const{relativeKey:g,driver:m}=n(s),w=Object.create(null);if(m.getMeta&&Object.assign(w,await Te(m.getMeta,g,u)),!u.nativeOnly){const v=await Te(m.getItem,g+"$",u).then(M=>Bt(M));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(w,v))}return w},setMeta(s,u,g={}){return this.setItem(s+"$",u,g)},removeMeta(s,u={}){return this.removeItem(s+"$",u)},async getKeys(s,u={}){s=Dt(s);const g=c(s,!0);let m=[];const w=[];for(const v of g){const W=(await Te(v.driver.getKeys,v.relativeBase,u)).map(Y=>v.mountpoint+He(Y)).filter(Y=>!m.some(N=>Y.startsWith(N)));w.push(...W),m=[v.mountpoint,...m.filter(Y=>!Y.startsWith(v.mountpoint))]}return s?w.filter(v=>v.startsWith(s)&&!v.endsWith("$")):w.filter(v=>!v.endsWith("$"))},async clear(s,u={}){s=Dt(s),await Promise.all(c(s,!1).map(async g=>{if(g.driver.clear)return Te(g.driver.clear,g.relativeBase,u);if(g.driver.removeItem){const m=await g.driver.getKeys(g.relativeBase||"",u);return Promise.all(m.map(w=>g.driver.removeItem(w,u)))}}))},async dispose(){await Promise.all(Object.values(r.mounts).map(s=>mr(s)))},async watch(s){return await b(),r.watchListeners.push(s),async()=>{r.watchListeners=r.watchListeners.filter(u=>u!==s),r.watchListeners.length===0&&await S()}},async unwatch(){r.watchListeners=[],await S()},mount(s,u){if(s=Dt(s),s&&r.mounts[s])throw new Error(`already mounted at ${s}`);return s&&(r.mountpoints.push(s),r.mountpoints.sort((g,m)=>m.length-g.length)),r.mounts[s]=u,r.watching&&Promise.resolve(xr(u,o,s)).then(g=>{r.unwatch[s]=g}).catch(console.error),y},async unmount(s,u=!0){s=Dt(s),!(!s||!r.mounts[s])&&(r.watching&&s in r.unwatch&&(r.unwatch[s](),delete r.unwatch[s]),u&&await mr(r.mounts[s]),r.mountpoints=r.mountpoints.filter(g=>g!==s),delete r.mounts[s])},getMount(s=""){s=He(s)+":";const u=n(s);return{driver:u.driver,base:u.base}},getMounts(s="",u={}){return s=He(s),c(s,u.parents).map(m=>({driver:m.driver,base:m.mountpoint}))}};return y}function xr(e,r,n){return e.watch?e.watch((c,o)=>r(c,n+o)):()=>{}}async function mr(e){typeof e.dispose=="function"&&await Te(e.dispose)}function dt(e){return new Promise((r,n)=>{e.oncomplete=e.onsuccess=()=>r(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Ur(e,r){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(r);const c=dt(n);return(o,b)=>c.then(S=>b(S.transaction(r,o).objectStore(r)))}let Vt;function Tt(){return Vt||(Vt=Ur("keyval-store","keyval")),Vt}function fi(e,r=Tt()){return r("readonly",n=>dt(n.get(e)))}function ai(e,r,n=Tt()){return n("readwrite",c=>(c.put(r,e),dt(c.transaction)))}function ci(e,r=Tt()){return r("readwrite",n=>(n.delete(e),dt(n.transaction)))}function ui(e=Tt()){return e("readwrite",r=>(r.clear(),dt(r.transaction)))}function li(e,r){return e.openCursor().onsuccess=function(){this.result&&(r(this.result),this.result.continue())},dt(e.transaction)}function hi(e=Tt()){return e("readonly",r=>{if(r.getAllKeys)return dt(r.getAllKeys());const n=[];return li(r,c=>n.push(c.key)).then(()=>n)})}class di{}function bi(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var gi=yi;function yi(e,r,n){var c=n&&n.stringify||bi,o=1;if(typeof e=="object"&&e!==null){var b=r.length+o;if(b===1)return e;var S=new Array(b);S[0]=c(e);for(var E=1;E<b;E++)S[E]=c(r[E]);return S.join(" ")}if(typeof e!="string")return e;var y=r.length;if(y===0)return e;for(var s="",u=1-o,g=-1,m=e&&e.length||0,w=0;w<m;){if(e.charCodeAt(w)===37&&w+1<m){switch(g=g>-1?g:0,e.charCodeAt(w+1)){case 100:case 102:if(u>=y||r[u]==null)break;g<w&&(s+=e.slice(g,w)),s+=Number(r[u]),g=w+2,w++;break;case 105:if(u>=y||r[u]==null)break;g<w&&(s+=e.slice(g,w)),s+=Math.floor(Number(r[u])),g=w+2,w++;break;case 79:case 111:case 106:if(u>=y||r[u]===void 0)break;g<w&&(s+=e.slice(g,w));var v=typeof r[u];if(v==="string"){s+="'"+r[u]+"'",g=w+2,w++;break}if(v==="function"){s+=r[u].name||"<anonymous>",g=w+2,w++;break}s+=c(r[u]),g=w+2,w++;break;case 115:if(u>=y)break;g<w&&(s+=e.slice(g,w)),s+=String(r[u]),g=w+2,w++;break;case 37:g<w&&(s+=e.slice(g,w)),s+="%",g=w+2,w++,u--;break}++u}++w}return g===-1?e:(g<m&&(s+=e.slice(g)),s)}const vr=gi;var _t=Qe;const St=Ii().console||{},pi={mapHttpRequest:zt,mapHttpResponse:zt,wrapRequestSerializer:Yt,wrapResponseSerializer:Yt,wrapErrorSerializer:Yt,req:zt,res:zt,err:wi};function _i(e,r){return Array.isArray(e)?e.filter(function(c){return c!=="!stdSerializers.err"}):e===!0?Object.keys(r):!1}function Qe(e){e=e||{},e.browser=e.browser||{};const r=e.browser.transmit;if(r&&typeof r.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||St;e.browser.write&&(e.browser.asObject=!0);const c=e.serializers||{},o=_i(e.browser.serialize,c);let b=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(b=!1);const S=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),e.enabled===!1&&(e.level="silent");const E=e.level||"info",y=Object.create(n);y.log||(y.log=Ot),Object.defineProperty(y,"levelVal",{get:u}),Object.defineProperty(y,"level",{get:g,set:m});const s={transmit:r,serialize:o,asObject:e.browser.asObject,levels:S,timestamp:Ei(e)};y.levels=Qe.levels,y.level=E,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=Ot,y.serializers=c,y._serialize=o,y._stdErrSerialize=b,y.child=w,r&&(y._logEvent=Zt());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function g(){return this._level}function m(v){if(v!=="silent"&&!this.levels.values[v])throw Error("unknown level "+v);this._level=v,yt(s,y,"error","log"),yt(s,y,"fatal","error"),yt(s,y,"warn","error"),yt(s,y,"info","log"),yt(s,y,"debug","log"),yt(s,y,"trace","log")}function w(v,M){if(!v)throw new Error("missing bindings for child Pino");M=M||{},o&&v.serializers&&(M.serializers=v.serializers);const W=M.serializers;if(o&&W){var Y=Object.assign({},c,W),N=e.browser.serialize===!0?Object.keys(Y):o;delete v.serializers,kt([v],N,Y,this._stdErrSerialize)}function Le(ge){this._childLevel=(ge._childLevel|0)+1,this.error=pt(ge,v,"error"),this.fatal=pt(ge,v,"fatal"),this.warn=pt(ge,v,"warn"),this.info=pt(ge,v,"info"),this.debug=pt(ge,v,"debug"),this.trace=pt(ge,v,"trace"),Y&&(this.serializers=Y,this._serialize=N),r&&(this._logEvent=Zt([].concat(ge._logEvent.bindings,v)))}return Le.prototype=this,new Le(this)}return y}Qe.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Qe.stdSerializers=pi;Qe.stdTimeFunctions=Object.assign({},{nullTime:Hr,epochTime:Kr,unixTime:Si,isoTime:Oi});function yt(e,r,n,c){const o=Object.getPrototypeOf(r);r[n]=r.levelVal>r.levels.values[n]?Ot:o[n]?o[n]:St[n]||St[c]||Ot,xi(e,r,n)}function xi(e,r,n){!e.transmit&&r[n]===Ot||(r[n]=function(c){return function(){const b=e.timestamp(),S=new Array(arguments.length),E=Object.getPrototypeOf&&Object.getPrototypeOf(this)===St?St:this;for(var y=0;y<S.length;y++)S[y]=arguments[y];if(e.serialize&&!e.asObject&&kt(S,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?c.call(E,mi(this,n,S,b)):c.apply(E,S),e.transmit){const s=e.transmit.level||r.level,u=Qe.levels.values[s],g=Qe.levels.values[n];if(g<u)return;vi(this,{ts:b,methodLevel:n,methodValue:g,transmitLevel:s,transmitValue:Qe.levels.values[e.transmit.level||r.level],send:e.transmit.send,val:r.levelVal},S)}}}(r[n]))}function mi(e,r,n,c){e._serialize&&kt(n,e._serialize,e.serializers,e._stdErrSerialize);const o=n.slice();let b=o[0];const S={};c&&(S.time=c),S.level=Qe.levels.values[r];let E=(e._childLevel|0)+1;if(E<1&&(E=1),b!==null&&typeof b=="object"){for(;E--&&typeof o[0]=="object";)Object.assign(S,o.shift());b=o.length?vr(o.shift(),o):void 0}else typeof b=="string"&&(b=vr(o.shift(),o));return b!==void 0&&(S.msg=b),S}function kt(e,r,n,c){for(const o in e)if(c&&e[o]instanceof Error)e[o]=Qe.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(const b in e[o])r&&r.indexOf(b)>-1&&b in n&&(e[o][b]=n[b](e[o][b]))}function pt(e,r,n){return function(){const c=new Array(1+arguments.length);c[0]=r;for(var o=1;o<c.length;o++)c[o]=arguments[o-1];return e[n].apply(this,c)}}function vi(e,r,n){const c=r.send,o=r.ts,b=r.methodLevel,S=r.methodValue,E=r.val,y=e._logEvent.bindings;kt(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=n.filter(function(s){return y.indexOf(s)===-1}),e._logEvent.level.label=b,e._logEvent.level.value=S,c(b,e._logEvent,E),e._logEvent=Zt(y)}function Zt(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function wi(e){const r={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)r[n]===void 0&&(r[n]=e[n]);return r}function Ei(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Hr:Kr}function zt(){return{}}function Yt(e){return e}function Ot(){}function Hr(){return!1}function Kr(){return Date.now()}function Si(){return Math.round(Date.now()/1e3)}function Oi(){return new Date(Date.now()).toISOString()}function Ii(){function e(r){return typeof r<"u"&&r}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}const rr=U.getDefaultExportFromCjs(_t),Ti=e=>JSON.stringify(e,(r,n)=>typeof n=="bigint"?n.toString()+"n":n);function wr(e){return typeof e=="string"?e:Ti(e)||""}const Li={level:"info"},Lt="custom_context",nr=1e3*1024;class Ai{constructor(r){this.nodeValue=r,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class Er{constructor(r){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=r,this.sizeInBytes=0}append(r){const n=new Ai(r);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${r} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const r=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=r.size}toArray(){const r=[];let n=this.head;for(;n!==null;)r.push(n.value),n=n.next;return r}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let r=this.head;return{next:()=>{if(!r)return{done:!0,value:null};const n=r.value;return r=r.next,{done:!1,value:n}}}}}class Gr{constructor(r,n=nr){this.level=r??"error",this.levelValue=_t.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Er(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(r,n){n===_t.levels.values.error?console.error(r):n===_t.levels.values.warn?console.warn(r):n===_t.levels.values.debug?console.debug(r):n===_t.levels.values.trace?console.trace(r):console.log(r)}appendToLogs(r){this.logs.append(wr({timestamp:new Date().toISOString(),log:r}));const n=typeof r=="string"?JSON.parse(r).level:r.level;n>=this.levelValue&&this.forwardToConsole(r,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Er(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(r){const n=this.getLogArray();return n.push(wr({extraMetadata:r})),new Blob(n,{type:"application/json"})}}class Ri{constructor(r,n=nr){this.baseChunkLogger=new Gr(r,n)}write(r){this.baseChunkLogger.appendToLogs(r)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(r){return this.baseChunkLogger.logsToBlob(r)}downloadLogsBlobInBrowser(r){const n=URL.createObjectURL(this.logsToBlob(r)),c=document.createElement("a");c.href=n,c.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(n)}}class Pi{constructor(r,n=nr){this.baseChunkLogger=new Gr(r,n)}write(r){this.baseChunkLogger.appendToLogs(r)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(r){return this.baseChunkLogger.logsToBlob(r)}}var ji=Object.defineProperty,Ci=Object.defineProperties,Mi=Object.getOwnPropertyDescriptors,Sr=Object.getOwnPropertySymbols,Ni=Object.prototype.hasOwnProperty,Bi=Object.prototype.propertyIsEnumerable,Or=(e,r,n)=>r in e?ji(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,Ht=(e,r)=>{for(var n in r||(r={}))Ni.call(r,n)&&Or(e,n,r[n]);if(Sr)for(var n of Sr(r))Bi.call(r,n)&&Or(e,n,r[n]);return e},Kt=(e,r)=>Ci(e,Mi(r));function Di(e){return Kt(Ht({},e),{level:(e==null?void 0:e.level)||Li.level})}function zi(e,r=Lt){return e[r]||""}function Ui(e,r,n=Lt){return e[n]=r,e}function $r(e,r=Lt){let n="";return typeof e.bindings>"u"?n=zi(e,r):n=e.bindings().context||"",n}function Hi(e,r,n=Lt){const c=$r(e,n);return c.trim()?`${c}/${r}`:r}function Ki(e,r,n=Lt){const c=Hi(e,r,n),o=e.child({context:c});return Ui(o,c,n)}function Gi(e){var r,n;const c=new Ri((r=e.opts)==null?void 0:r.level,e.maxSizeInBytes);return{logger:rr(Kt(Ht({},e.opts),{level:"trace",browser:Kt(Ht({},(n=e.opts)==null?void 0:n.browser),{write:o=>c.write(o)})})),chunkLoggerController:c}}function $i(e){var r;const n=new Pi((r=e.opts)==null?void 0:r.level,e.maxSizeInBytes);return{logger:rr(Kt(Ht({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function Fi(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Gi(e):$i(e)}var ir={},Fr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var r=De.binary,n=De.wipe;e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var c=function(){function E(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return E.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},E.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},E.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},E.prototype.update=function(y,s){if(s===void 0&&(s=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var u=0;if(this._bytesHashed+=s,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&s>0;)this._buffer[this._bufferLength++]=y[u++],s--;this._bufferLength===this.blockSize&&(b(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(s>=this.blockSize&&(u=b(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,u,s),s%=this.blockSize);s>0;)this._buffer[this._bufferLength++]=y[u++],s--;return this},E.prototype.finish=function(y){if(!this._finished){var s=this._bytesHashed,u=this._bufferLength,g=s/536870912|0,m=s<<3,w=s%128<112?128:256;this._buffer[u]=128;for(var v=u+1;v<w-8;v++)this._buffer[v]=0;r.writeUint32BE(g,this._buffer,w-8),r.writeUint32BE(m,this._buffer,w-4),b(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,w),this._finished=!0}for(var v=0;v<this.digestLength/8;v++)r.writeUint32BE(this._stateHi[v],y,v*8),r.writeUint32BE(this._stateLo[v],y,v*8+4);return this},E.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},E.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},E.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},E.prototype.cleanSavedState=function(y){n.wipe(y.stateHi),n.wipe(y.stateLo),y.buffer&&n.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},E}();e.SHA512=c;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function b(E,y,s,u,g,m,w){for(var v=s[0],M=s[1],W=s[2],Y=s[3],N=s[4],Le=s[5],ge=s[6],Ce=s[7],$=u[0],C=u[1],Me=u[2],et=u[3],ye=u[4],ke=u[5],Ke=u[6],Ve=u[7],x,_,X,le,A,O,I,L;w>=128;){for(var Ae=0;Ae<16;Ae++){var ne=8*Ae+m;E[Ae]=r.readUint32BE(g,ne),y[Ae]=r.readUint32BE(g,ne+4)}for(var Ae=0;Ae<80;Ae++){var xt=v,B=M,bt=W,d=Y,h=N,l=Le,t=ge,f=Ce,R=$,P=C,z=Me,H=et,D=ye,K=ke,Re=Ke,he=Ve;if(x=Ce,_=Ve,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=(N>>>14|ye<<18)^(N>>>18|ye<<14)^(ye>>>9|N<<23),_=(ye>>>14|N<<18)^(ye>>>18|N<<14)^(N>>>9|ye<<23),A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,x=N&Le^~N&ge,_=ye&ke^~ye&Ke,A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,x=o[Ae*2],_=o[Ae*2+1],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,x=E[Ae%16],_=y[Ae%16],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,X=I&65535|L<<16,le=A&65535|O<<16,x=X,_=le,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=(v>>>28|$<<4)^($>>>2|v<<30)^($>>>7|v<<25),_=($>>>28|v<<4)^(v>>>2|$<<30)^(v>>>7|$<<25),A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,x=v&M^v&W^M&W,_=$&C^$&Me^C&Me,A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,f=I&65535|L<<16,he=A&65535|O<<16,x=d,_=H,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=X,_=le,A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,d=I&65535|L<<16,H=A&65535|O<<16,M=xt,W=B,Y=bt,N=d,Le=h,ge=l,Ce=t,v=f,C=R,Me=P,et=z,ye=H,ke=D,Ke=K,Ve=Re,$=he,Ae%16===15)for(var ne=0;ne<16;ne++)x=E[ne],_=y[ne],A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=E[(ne+9)%16],_=y[(ne+9)%16],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,X=E[(ne+1)%16],le=y[(ne+1)%16],x=(X>>>1|le<<31)^(X>>>8|le<<24)^X>>>7,_=(le>>>1|X<<31)^(le>>>8|X<<24)^(le>>>7|X<<25),A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,X=E[(ne+14)%16],le=y[(ne+14)%16],x=(X>>>19|le<<13)^(le>>>29|X<<3)^X>>>6,_=(le>>>19|X<<13)^(X>>>29|le<<3)^(le>>>6|X<<26),A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,E[ne]=I&65535|L<<16,y[ne]=A&65535|O<<16}x=v,_=$,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=s[0],_=u[0],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,s[0]=v=I&65535|L<<16,u[0]=$=A&65535|O<<16,x=M,_=C,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=s[1],_=u[1],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,s[1]=M=I&65535|L<<16,u[1]=C=A&65535|O<<16,x=W,_=Me,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=s[2],_=u[2],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,s[2]=W=I&65535|L<<16,u[2]=Me=A&65535|O<<16,x=Y,_=et,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=s[3],_=u[3],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,s[3]=Y=I&65535|L<<16,u[3]=et=A&65535|O<<16,x=N,_=ye,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=s[4],_=u[4],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,s[4]=N=I&65535|L<<16,u[4]=ye=A&65535|O<<16,x=Le,_=ke,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=s[5],_=u[5],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,s[5]=Le=I&65535|L<<16,u[5]=ke=A&65535|O<<16,x=ge,_=Ke,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=s[6],_=u[6],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,s[6]=ge=I&65535|L<<16,u[6]=Ke=A&65535|O<<16,x=Ce,_=Ve,A=_&65535,O=_>>>16,I=x&65535,L=x>>>16,x=s[7],_=u[7],A+=_&65535,O+=_>>>16,I+=x&65535,L+=x>>>16,O+=A>>>16,I+=O>>>16,L+=I>>>16,s[7]=Ce=I&65535|L<<16,u[7]=Ve=A&65535|O<<16,m+=128,w-=128}return m}function S(E){var y=new c;y.update(E);var s=y.digest();return y.clean(),s}e.hash=S})(Fr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;const r=De.random,n=Fr,c=De.wipe;e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;function o(d){const h=new Float64Array(16);if(d)for(let l=0;l<d.length;l++)h[l]=d[l];return h}const b=new Uint8Array(32);b[0]=9;const S=o(),E=o([1]),y=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),s=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),g=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(d,h){for(let l=0;l<16;l++)d[l]=h[l]|0}function v(d){let h=1;for(let l=0;l<16;l++){let t=d[l]+h+65535;h=Math.floor(t/65536),d[l]=t-h*65536}d[0]+=h-1+37*(h-1)}function M(d,h,l){const t=~(l-1);for(let f=0;f<16;f++){const R=t&(d[f]^h[f]);d[f]^=R,h[f]^=R}}function W(d,h){const l=o(),t=o();for(let f=0;f<16;f++)t[f]=h[f];v(t),v(t),v(t);for(let f=0;f<2;f++){l[0]=t[0]-65517;for(let P=1;P<15;P++)l[P]=t[P]-65535-(l[P-1]>>16&1),l[P-1]&=65535;l[15]=t[15]-32767-(l[14]>>16&1);const R=l[15]>>16&1;l[14]&=65535,M(t,l,1-R)}for(let f=0;f<16;f++)d[2*f]=t[f]&255,d[2*f+1]=t[f]>>8}function Y(d,h){let l=0;for(let t=0;t<32;t++)l|=d[t]^h[t];return(1&l-1>>>8)-1}function N(d,h){const l=new Uint8Array(32),t=new Uint8Array(32);return W(l,d),W(t,h),Y(l,t)}function Le(d){const h=new Uint8Array(32);return W(h,d),h[0]&1}function ge(d,h){for(let l=0;l<16;l++)d[l]=h[2*l]+(h[2*l+1]<<8);d[15]&=32767}function Ce(d,h,l){for(let t=0;t<16;t++)d[t]=h[t]+l[t]}function $(d,h,l){for(let t=0;t<16;t++)d[t]=h[t]-l[t]}function C(d,h,l){let t,f,R=0,P=0,z=0,H=0,D=0,K=0,Re=0,he=0,Pe=0,pe=0,de=0,ie=0,re=0,Z=0,q=0,G=0,se=0,_e=0,F=0,Ne=0,ze=0,Ge=0,$e=0,Ue=0,Ye=0,Ze=0,st=0,Fe=0,ct=0,mt=0,At=0,oe=l[0],Q=l[1],fe=l[2],ae=l[3],ce=l[4],ee=l[5],xe=l[6],me=l[7],ve=l[8],we=l[9],Ee=l[10],be=l[11],ue=l[12],k=l[13],Se=l[14],Oe=l[15];t=h[0],R+=t*oe,P+=t*Q,z+=t*fe,H+=t*ae,D+=t*ce,K+=t*ee,Re+=t*xe,he+=t*me,Pe+=t*ve,pe+=t*we,de+=t*Ee,ie+=t*be,re+=t*ue,Z+=t*k,q+=t*Se,G+=t*Oe,t=h[1],P+=t*oe,z+=t*Q,H+=t*fe,D+=t*ae,K+=t*ce,Re+=t*ee,he+=t*xe,Pe+=t*me,pe+=t*ve,de+=t*we,ie+=t*Ee,re+=t*be,Z+=t*ue,q+=t*k,G+=t*Se,se+=t*Oe,t=h[2],z+=t*oe,H+=t*Q,D+=t*fe,K+=t*ae,Re+=t*ce,he+=t*ee,Pe+=t*xe,pe+=t*me,de+=t*ve,ie+=t*we,re+=t*Ee,Z+=t*be,q+=t*ue,G+=t*k,se+=t*Se,_e+=t*Oe,t=h[3],H+=t*oe,D+=t*Q,K+=t*fe,Re+=t*ae,he+=t*ce,Pe+=t*ee,pe+=t*xe,de+=t*me,ie+=t*ve,re+=t*we,Z+=t*Ee,q+=t*be,G+=t*ue,se+=t*k,_e+=t*Se,F+=t*Oe,t=h[4],D+=t*oe,K+=t*Q,Re+=t*fe,he+=t*ae,Pe+=t*ce,pe+=t*ee,de+=t*xe,ie+=t*me,re+=t*ve,Z+=t*we,q+=t*Ee,G+=t*be,se+=t*ue,_e+=t*k,F+=t*Se,Ne+=t*Oe,t=h[5],K+=t*oe,Re+=t*Q,he+=t*fe,Pe+=t*ae,pe+=t*ce,de+=t*ee,ie+=t*xe,re+=t*me,Z+=t*ve,q+=t*we,G+=t*Ee,se+=t*be,_e+=t*ue,F+=t*k,Ne+=t*Se,ze+=t*Oe,t=h[6],Re+=t*oe,he+=t*Q,Pe+=t*fe,pe+=t*ae,de+=t*ce,ie+=t*ee,re+=t*xe,Z+=t*me,q+=t*ve,G+=t*we,se+=t*Ee,_e+=t*be,F+=t*ue,Ne+=t*k,ze+=t*Se,Ge+=t*Oe,t=h[7],he+=t*oe,Pe+=t*Q,pe+=t*fe,de+=t*ae,ie+=t*ce,re+=t*ee,Z+=t*xe,q+=t*me,G+=t*ve,se+=t*we,_e+=t*Ee,F+=t*be,Ne+=t*ue,ze+=t*k,Ge+=t*Se,$e+=t*Oe,t=h[8],Pe+=t*oe,pe+=t*Q,de+=t*fe,ie+=t*ae,re+=t*ce,Z+=t*ee,q+=t*xe,G+=t*me,se+=t*ve,_e+=t*we,F+=t*Ee,Ne+=t*be,ze+=t*ue,Ge+=t*k,$e+=t*Se,Ue+=t*Oe,t=h[9],pe+=t*oe,de+=t*Q,ie+=t*fe,re+=t*ae,Z+=t*ce,q+=t*ee,G+=t*xe,se+=t*me,_e+=t*ve,F+=t*we,Ne+=t*Ee,ze+=t*be,Ge+=t*ue,$e+=t*k,Ue+=t*Se,Ye+=t*Oe,t=h[10],de+=t*oe,ie+=t*Q,re+=t*fe,Z+=t*ae,q+=t*ce,G+=t*ee,se+=t*xe,_e+=t*me,F+=t*ve,Ne+=t*we,ze+=t*Ee,Ge+=t*be,$e+=t*ue,Ue+=t*k,Ye+=t*Se,Ze+=t*Oe,t=h[11],ie+=t*oe,re+=t*Q,Z+=t*fe,q+=t*ae,G+=t*ce,se+=t*ee,_e+=t*xe,F+=t*me,Ne+=t*ve,ze+=t*we,Ge+=t*Ee,$e+=t*be,Ue+=t*ue,Ye+=t*k,Ze+=t*Se,st+=t*Oe,t=h[12],re+=t*oe,Z+=t*Q,q+=t*fe,G+=t*ae,se+=t*ce,_e+=t*ee,F+=t*xe,Ne+=t*me,ze+=t*ve,Ge+=t*we,$e+=t*Ee,Ue+=t*be,Ye+=t*ue,Ze+=t*k,st+=t*Se,Fe+=t*Oe,t=h[13],Z+=t*oe,q+=t*Q,G+=t*fe,se+=t*ae,_e+=t*ce,F+=t*ee,Ne+=t*xe,ze+=t*me,Ge+=t*ve,$e+=t*we,Ue+=t*Ee,Ye+=t*be,Ze+=t*ue,st+=t*k,Fe+=t*Se,ct+=t*Oe,t=h[14],q+=t*oe,G+=t*Q,se+=t*fe,_e+=t*ae,F+=t*ce,Ne+=t*ee,ze+=t*xe,Ge+=t*me,$e+=t*ve,Ue+=t*we,Ye+=t*Ee,Ze+=t*be,st+=t*ue,Fe+=t*k,ct+=t*Se,mt+=t*Oe,t=h[15],G+=t*oe,se+=t*Q,_e+=t*fe,F+=t*ae,Ne+=t*ce,ze+=t*ee,Ge+=t*xe,$e+=t*me,Ue+=t*ve,Ye+=t*we,Ze+=t*Ee,st+=t*be,Fe+=t*ue,ct+=t*k,mt+=t*Se,At+=t*Oe,R+=38*se,P+=38*_e,z+=38*F,H+=38*Ne,D+=38*ze,K+=38*Ge,Re+=38*$e,he+=38*Ue,Pe+=38*Ye,pe+=38*Ze,de+=38*st,ie+=38*Fe,re+=38*ct,Z+=38*mt,q+=38*At,f=1,t=R+f+65535,f=Math.floor(t/65536),R=t-f*65536,t=P+f+65535,f=Math.floor(t/65536),P=t-f*65536,t=z+f+65535,f=Math.floor(t/65536),z=t-f*65536,t=H+f+65535,f=Math.floor(t/65536),H=t-f*65536,t=D+f+65535,f=Math.floor(t/65536),D=t-f*65536,t=K+f+65535,f=Math.floor(t/65536),K=t-f*65536,t=Re+f+65535,f=Math.floor(t/65536),Re=t-f*65536,t=he+f+65535,f=Math.floor(t/65536),he=t-f*65536,t=Pe+f+65535,f=Math.floor(t/65536),Pe=t-f*65536,t=pe+f+65535,f=Math.floor(t/65536),pe=t-f*65536,t=de+f+65535,f=Math.floor(t/65536),de=t-f*65536,t=ie+f+65535,f=Math.floor(t/65536),ie=t-f*65536,t=re+f+65535,f=Math.floor(t/65536),re=t-f*65536,t=Z+f+65535,f=Math.floor(t/65536),Z=t-f*65536,t=q+f+65535,f=Math.floor(t/65536),q=t-f*65536,t=G+f+65535,f=Math.floor(t/65536),G=t-f*65536,R+=f-1+37*(f-1),f=1,t=R+f+65535,f=Math.floor(t/65536),R=t-f*65536,t=P+f+65535,f=Math.floor(t/65536),P=t-f*65536,t=z+f+65535,f=Math.floor(t/65536),z=t-f*65536,t=H+f+65535,f=Math.floor(t/65536),H=t-f*65536,t=D+f+65535,f=Math.floor(t/65536),D=t-f*65536,t=K+f+65535,f=Math.floor(t/65536),K=t-f*65536,t=Re+f+65535,f=Math.floor(t/65536),Re=t-f*65536,t=he+f+65535,f=Math.floor(t/65536),he=t-f*65536,t=Pe+f+65535,f=Math.floor(t/65536),Pe=t-f*65536,t=pe+f+65535,f=Math.floor(t/65536),pe=t-f*65536,t=de+f+65535,f=Math.floor(t/65536),de=t-f*65536,t=ie+f+65535,f=Math.floor(t/65536),ie=t-f*65536,t=re+f+65535,f=Math.floor(t/65536),re=t-f*65536,t=Z+f+65535,f=Math.floor(t/65536),Z=t-f*65536,t=q+f+65535,f=Math.floor(t/65536),q=t-f*65536,t=G+f+65535,f=Math.floor(t/65536),G=t-f*65536,R+=f-1+37*(f-1),d[0]=R,d[1]=P,d[2]=z,d[3]=H,d[4]=D,d[5]=K,d[6]=Re,d[7]=he,d[8]=Pe,d[9]=pe,d[10]=de,d[11]=ie,d[12]=re,d[13]=Z,d[14]=q,d[15]=G}function Me(d,h){C(d,h,h)}function et(d,h){const l=o();let t;for(t=0;t<16;t++)l[t]=h[t];for(t=253;t>=0;t--)Me(l,l),t!==2&&t!==4&&C(l,l,h);for(t=0;t<16;t++)d[t]=l[t]}function ye(d,h){const l=o();let t;for(t=0;t<16;t++)l[t]=h[t];for(t=250;t>=0;t--)Me(l,l),t!==1&&C(l,l,h);for(t=0;t<16;t++)d[t]=l[t]}function ke(d,h){const l=o(),t=o(),f=o(),R=o(),P=o(),z=o(),H=o(),D=o(),K=o();$(l,d[1],d[0]),$(K,h[1],h[0]),C(l,l,K),Ce(t,d[0],d[1]),Ce(K,h[0],h[1]),C(t,t,K),C(f,d[3],h[3]),C(f,f,s),C(R,d[2],h[2]),Ce(R,R,R),$(P,t,l),$(z,R,f),Ce(H,R,f),Ce(D,t,l),C(d[0],P,z),C(d[1],D,H),C(d[2],H,z),C(d[3],P,D)}function Ke(d,h,l){for(let t=0;t<4;t++)M(d[t],h[t],l)}function Ve(d,h){const l=o(),t=o(),f=o();et(f,h[2]),C(l,h[0],f),C(t,h[1],f),W(d,t),d[31]^=Le(l)<<7}function x(d,h,l){w(d[0],S),w(d[1],E),w(d[2],E),w(d[3],S);for(let t=255;t>=0;--t){const f=l[t/8|0]>>(t&7)&1;Ke(d,h,f),ke(h,d),ke(d,d),Ke(d,h,f)}}function _(d,h){const l=[o(),o(),o(),o()];w(l[0],u),w(l[1],g),w(l[2],E),C(l[3],u,g),x(d,l,h)}function X(d){if(d.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);const h=(0,n.hash)(d);h[0]&=248,h[31]&=127,h[31]|=64;const l=new Uint8Array(32),t=[o(),o(),o(),o()];_(t,h),Ve(l,t);const f=new Uint8Array(64);return f.set(d),f.set(l,32),{publicKey:l,secretKey:f}}e.generateKeyPairFromSeed=X;function le(d){const h=(0,r.randomBytes)(32,d),l=X(h);return(0,c.wipe)(h),l}e.generateKeyPair=le;function A(d){if(d.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(d.subarray(32))}e.extractPublicKeyFromSecretKey=A;const O=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function I(d,h){let l,t,f,R;for(t=63;t>=32;--t){for(l=0,f=t-32,R=t-12;f<R;++f)h[f]+=l-16*h[t]*O[f-(t-32)],l=Math.floor((h[f]+128)/256),h[f]-=l*256;h[f]+=l,h[t]=0}for(l=0,f=0;f<32;f++)h[f]+=l-(h[31]>>4)*O[f],l=h[f]>>8,h[f]&=255;for(f=0;f<32;f++)h[f]-=l*O[f];for(t=0;t<32;t++)h[t+1]+=h[t]>>8,d[t]=h[t]&255}function L(d){const h=new Float64Array(64);for(let l=0;l<64;l++)h[l]=d[l];for(let l=0;l<64;l++)d[l]=0;I(d,h)}function Ae(d,h){const l=new Float64Array(64),t=[o(),o(),o(),o()],f=(0,n.hash)(d.subarray(0,32));f[0]&=248,f[31]&=127,f[31]|=64;const R=new Uint8Array(64);R.set(f.subarray(32),32);const P=new n.SHA512;P.update(R.subarray(32)),P.update(h);const z=P.digest();P.clean(),L(z),_(t,z),Ve(R,t),P.reset(),P.update(R.subarray(0,32)),P.update(d.subarray(32)),P.update(h);const H=P.digest();L(H);for(let D=0;D<32;D++)l[D]=z[D];for(let D=0;D<32;D++)for(let K=0;K<32;K++)l[D+K]+=H[D]*f[K];return I(R.subarray(32),l),R}e.sign=Ae;function ne(d,h){const l=o(),t=o(),f=o(),R=o(),P=o(),z=o(),H=o();return w(d[2],E),ge(d[1],h),Me(f,d[1]),C(R,f,y),$(f,f,d[2]),Ce(R,d[2],R),Me(P,R),Me(z,P),C(H,z,P),C(l,H,f),C(l,l,R),ye(l,l),C(l,l,f),C(l,l,R),C(l,l,R),C(d[0],l,R),Me(t,d[0]),C(t,t,R),N(t,f)&&C(d[0],d[0],m),Me(t,d[0]),C(t,t,R),N(t,f)?-1:(Le(d[0])===h[31]>>7&&$(d[0],S,d[0]),C(d[3],d[0],d[1]),0)}function xt(d,h,l){const t=new Uint8Array(32),f=[o(),o(),o(),o()],R=[o(),o(),o(),o()];if(l.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(ne(R,d))return!1;const P=new n.SHA512;P.update(l.subarray(0,32)),P.update(d),P.update(h);const z=P.digest();return L(z),x(f,R,z),_(R,l.subarray(32)),ke(f,R),Ve(t,f),!Y(l,t)}e.verify=xt;function B(d){let h=[o(),o(),o(),o()];if(ne(h,d))throw new Error("Ed25519: invalid public key");let l=o(),t=o(),f=h[1];Ce(l,E,f),$(t,E,f),et(t,t),C(l,l,t);let R=new Uint8Array(32);return W(R,l),R}e.convertPublicKeyToX25519=B;function bt(d){const h=(0,n.hash)(d.subarray(0,32));h[0]&=248,h[31]&=127,h[31]|=64;const l=new Uint8Array(h.subarray(0,32));return(0,c.wipe)(h),l}e.convertSecretKeyToX25519=bt})(ir);const Ji="EdDSA",ki="JWT",Jr=".",kr="base64url",Wi="utf8",qi="utf8",Vi=":",Yi="did",Xi="key",Ir="base58btc",Zi="z",Qi="K36",es=32,ts=e=>JSON.stringify(e,(r,n)=>typeof n=="bigint"?n.toString()+"n":n);function rs(e){return typeof e=="string"?e:ts(e)||""}function Gt(e){return Jt(Ft(rs(e),Wi),kr)}function Wr(e){const r=Ft(Qi,Ir),n=Zi+Jt(Nr([r,e]),Ir);return[Yi,Xi,n].join(Vi)}function ns(e){return Jt(e,kr)}function is(e){return Ft([Gt(e.header),Gt(e.payload)].join(Jr),qi)}function ss(e){return[Gt(e.header),Gt(e.payload),ns(e.signature)].join(Jr)}function os(e=De.random.randomBytes(es)){return ir.generateKeyPairFromSeed(e)}async function fs(e,r,n,c,o=De.cjs.fromMiliseconds(Date.now())){const b={alg:Ji,typ:ki},S=Wr(c.publicKey),E=o+n,y={iss:S,sub:e,aud:r,iat:o,exp:E},s=is({header:b,payload:y}),u=ir.sign(c.secretKey,s);return ss({header:b,payload:y,signature:u})}const as="PARSE_ERROR",cs="INVALID_REQUEST",us="METHOD_NOT_FOUND",ls="INVALID_PARAMS",qr="INTERNAL_ERROR",sr="SERVER_ERROR",hs=[-32700,-32600,-32601,-32602,-32603],Et={[as]:{code:-32700,message:"Parse error"},[cs]:{code:-32600,message:"Invalid Request"},[us]:{code:-32601,message:"Method not found"},[ls]:{code:-32602,message:"Invalid params"},[qr]:{code:-32603,message:"Internal error"},[sr]:{code:-32e3,message:"Server error"}},Vr=sr;function ds(e){return hs.includes(e)}function Tr(e){return Object.keys(Et).includes(e)?Et[e]:Et[Vr]}function bs(e){const r=Object.values(Et).find(n=>n.code===e);return r||Et[Vr]}function Yr(e,r,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${r}`):e}var Xr={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qt=function(e,r){return Qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,c){n.__proto__=c}||function(n,c){for(var o in c)c.hasOwnProperty(o)&&(n[o]=c[o])},Qt(e,r)};function gs(e,r){Qt(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var er=function(){return er=Object.assign||function(r){for(var n,c=1,o=arguments.length;c<o;c++){n=arguments[c];for(var b in n)Object.prototype.hasOwnProperty.call(n,b)&&(r[b]=n[b])}return r},er.apply(this,arguments)};function ys(e,r){var n={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&r.indexOf(c)<0&&(n[c]=e[c]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,c=Object.getOwnPropertySymbols(e);o<c.length;o++)r.indexOf(c[o])<0&&Object.prototype.propertyIsEnumerable.call(e,c[o])&&(n[c[o]]=e[c[o]]);return n}function ps(e,r,n,c){var o=arguments.length,b=o<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,n):c,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,r,n,c);else for(var E=e.length-1;E>=0;E--)(S=e[E])&&(b=(o<3?S(b):o>3?S(r,n,b):S(r,n))||b);return o>3&&b&&Object.defineProperty(r,n,b),b}function _s(e,r){return function(n,c){r(n,c,e)}}function xs(e,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,r)}function ms(e,r,n,c){function o(b){return b instanceof n?b:new n(function(S){S(b)})}return new(n||(n=Promise))(function(b,S){function E(u){try{s(c.next(u))}catch(g){S(g)}}function y(u){try{s(c.throw(u))}catch(g){S(g)}}function s(u){u.done?b(u.value):o(u.value).then(E,y)}s((c=c.apply(e,r||[])).next())})}function vs(e,r){var n={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},c,o,b,S;return S={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function E(s){return function(u){return y([s,u])}}function y(s){if(c)throw new TypeError("Generator is already executing.");for(;n;)try{if(c=1,o&&(b=s[0]&2?o.return:s[0]?o.throw||((b=o.return)&&b.call(o),0):o.next)&&!(b=b.call(o,s[1])).done)return b;switch(o=0,b&&(s=[s[0]&2,b.value]),s[0]){case 0:case 1:b=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,o=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(b=n.trys,!(b=b.length>0&&b[b.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!b||s[1]>b[0]&&s[1]<b[3])){n.label=s[1];break}if(s[0]===6&&n.label<b[1]){n.label=b[1],b=s;break}if(b&&n.label<b[2]){n.label=b[2],n.ops.push(s);break}b[2]&&n.ops.pop(),n.trys.pop();continue}s=r.call(e,n)}catch(u){s=[6,u],o=0}finally{c=b=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function ws(e,r,n,c){c===void 0&&(c=n),e[c]=r[n]}function Es(e,r){for(var n in e)n!=="default"&&!r.hasOwnProperty(n)&&(r[n]=e[n])}function tr(e){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&e[r],c=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&c>=e.length&&(e=void 0),{value:e&&e[c++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zr(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var c=n.call(e),o,b=[],S;try{for(;(r===void 0||r-- >0)&&!(o=c.next()).done;)b.push(o.value)}catch(E){S={error:E}}finally{try{o&&!o.done&&(n=c.return)&&n.call(c)}finally{if(S)throw S.error}}return b}function Ss(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(Zr(arguments[r]));return e}function Os(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;for(var c=Array(e),o=0,r=0;r<n;r++)for(var b=arguments[r],S=0,E=b.length;S<E;S++,o++)c[o]=b[S];return c}function It(e){return this instanceof It?(this.v=e,this):new It(e)}function Is(e,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=n.apply(e,r||[]),o,b=[];return o={},S("next"),S("throw"),S("return"),o[Symbol.asyncIterator]=function(){return this},o;function S(m){c[m]&&(o[m]=function(w){return new Promise(function(v,M){b.push([m,w,v,M])>1||E(m,w)})})}function E(m,w){try{y(c[m](w))}catch(v){g(b[0][3],v)}}function y(m){m.value instanceof It?Promise.resolve(m.value.v).then(s,u):g(b[0][2],m)}function s(m){E("next",m)}function u(m){E("throw",m)}function g(m,w){m(w),b.shift(),b.length&&E(b[0][0],b[0][1])}}function Ts(e){var r,n;return r={},c("next"),c("throw",function(o){throw o}),c("return"),r[Symbol.iterator]=function(){return this},r;function c(o,b){r[o]=e[o]?function(S){return(n=!n)?{value:It(e[o](S)),done:o==="return"}:b?b(S):S}:b}}function Ls(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],n;return r?r.call(e):(e=typeof tr=="function"?tr(e):e[Symbol.iterator](),n={},c("next"),c("throw"),c("return"),n[Symbol.asyncIterator]=function(){return this},n);function c(b){n[b]=e[b]&&function(S){return new Promise(function(E,y){S=e[b](S),o(E,y,S.done,S.value)})}}function o(b,S,E,y){Promise.resolve(y).then(function(s){b({value:s,done:E})},S)}}function As(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e}function Rs(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}function Ps(e){return e&&e.__esModule?e:{default:e}}function js(e,r){if(!r.has(e))throw new TypeError("attempted to get private field on non-instance");return r.get(e)}function Cs(e,r,n){if(!r.has(e))throw new TypeError("attempted to set private field on non-instance");return r.set(e,n),n}const Ms=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return er},__asyncDelegator:Ts,__asyncGenerator:Is,__asyncValues:Ls,__await:It,__awaiter:ms,__classPrivateFieldGet:js,__classPrivateFieldSet:Cs,__createBinding:ws,__decorate:ps,__exportStar:Es,__extends:gs,__generator:vs,__importDefault:Ps,__importStar:Rs,__makeTemplateObject:As,__metadata:xs,__param:_s,__read:Zr,__rest:ys,__spread:Ss,__spreadArrays:Os,__values:tr},Symbol.toStringTag,{value:"Module"})),Ns=U.getAugmentedNamespace(Ms);var nt={},Lr;function Bs(){if(Lr)return nt;Lr=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.isBrowserCryptoAvailable=nt.getSubtleCrypto=nt.getBrowerCrypto=void 0;function e(){return(U.commonjsGlobal===null||U.commonjsGlobal===void 0?void 0:U.commonjsGlobal.crypto)||(U.commonjsGlobal===null||U.commonjsGlobal===void 0?void 0:U.commonjsGlobal.msCrypto)||{}}nt.getBrowerCrypto=e;function r(){const c=e();return c.subtle||c.webkitSubtle}nt.getSubtleCrypto=r;function n(){return!!e()&&!!r()}return nt.isBrowserCryptoAvailable=n,nt}var it={},Ar;function Ds(){if(Ar)return it;Ar=1,Object.defineProperty(it,"__esModule",{value:!0}),it.isBrowser=it.isNode=it.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}it.isReactNative=e;function r(){return typeof U.dist.process<"u"&&typeof U.dist.process.versions<"u"&&typeof U.dist.process.versions.node<"u"}it.isNode=r;function n(){return!e()&&!r()}return it.isBrowser=n,it}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const r=Ns;r.__exportStar(Bs(),e),r.__exportStar(Ds(),e)})(Xr);function or(e=3){const r=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return r+n}function zs(e=6){return BigInt(or(e))}function Us(e,r,n){return{id:n||or(),jsonrpc:"2.0",method:e,params:r}}function Hs(e,r){return{id:e,jsonrpc:"2.0",result:r}}function Qr(e,r,n){return{id:e,jsonrpc:"2.0",error:Ks(r)}}function Ks(e,r){return typeof e>"u"?Tr(qr):(typeof e=="string"&&(e=Object.assign(Object.assign({},Tr(sr)),{message:e})),ds(e.code)&&(e=bs(e.code)),e)}class Gs{}class $s extends Gs{constructor(){super()}}class Fs extends $s{constructor(r){super()}}const Js="^https?:",ks="^wss?:";function Ws(e){const r=e.match(new RegExp(/^\w+:/,"gi"));if(!(!r||!r.length))return r[0]}function en(e,r){const n=Ws(e);return typeof n>"u"?!1:new RegExp(r).test(n)}function qs(e){return en(e,Js)}function Rr(e){return en(e,ks)}function Vs(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function tn(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function Ys(e){return tn(e)&&"method"in e}function Xs(e){return tn(e)&&(rn(e)||nn(e))}function rn(e){return"result"in e}function nn(e){return"error"in e}const Zs=e=>JSON.stringify(e,(r,n)=>typeof n=="bigint"?n.toString()+"n":n),Qs=e=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(r,'$1"$2n"$3');return JSON.parse(n,(c,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function eo(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Qs(e)}catch{return e}}function to(e){return typeof e=="string"?e:Zs(e)||""}const ro=()=>typeof WebSocket<"u"?WebSocket:typeof U.dist.global<"u"&&typeof U.dist.global.WebSocket<"u"?U.dist.global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),no=()=>typeof WebSocket<"u"||typeof U.dist.global<"u"&&typeof U.dist.global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Pr=e=>e.split("?")[0],jr=10,io=ro();class so{constructor(r){if(this.url=r,this.events=new U.eventsExports.EventEmitter,this.registering=!1,!Rr(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}off(r,n){this.events.off(r,n)}removeListener(r,n){this.events.removeListener(r,n)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=c=>{this.onClose(c),r()},this.socket.close()})}async send(r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(to(r))}catch(n){this.onError(r.id,n)}}register(r=this.url){if(!Rr(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((c,o)=>{this.events.once("register_error",b=>{this.resetMaxListeners(),o(b)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));c(this.socket)})})}return this.url=r,this.registering=!0,new Promise((n,c)=>{const o=new URLSearchParams(r).get("origin"),b=Xr.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!Vs(r)},S=new io(r,[],b);no()?S.onerror=E=>{const y=E;c(this.emitError(y.error))}:S.on("error",E=>{c(this.emitError(E))}),S.onopen=()=>{this.onOpen(S),n(S)}})}onOpen(r){r.onmessage=n=>this.onPayload(n),r.onclose=n=>this.onClose(n),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;const n=typeof r.data=="string"?eo(r.data):r.data;this.events.emit("payload",n)}onError(r,n){const c=this.parseError(n),o=c.message||c.toString(),b=Qr(r,o);this.events.emit("payload",b)}parseError(r,n=this.url){return Yr(r,Pr(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>jr&&this.events.setMaxListeners(jr)}emitError(r){const n=this.parseError(new Error((r==null?void 0:r.message)||`WebSocket connection failed for host: ${Pr(this.url)}`));return this.events.emit("register_error",n),n}}var $t={exports:{}};$t.exports;(function(e,r){var n=200,c="__lodash_hash_undefined__",o=1,b=2,S=9007199254740991,E="[object Arguments]",y="[object Array]",s="[object AsyncFunction]",u="[object Boolean]",g="[object Date]",m="[object Error]",w="[object Function]",v="[object GeneratorFunction]",M="[object Map]",W="[object Number]",Y="[object Null]",N="[object Object]",Le="[object Promise]",ge="[object Proxy]",Ce="[object RegExp]",$="[object Set]",C="[object String]",Me="[object Symbol]",et="[object Undefined]",ye="[object WeakMap]",ke="[object ArrayBuffer]",Ke="[object DataView]",Ve="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",X="[object Int16Array]",le="[object Int32Array]",A="[object Uint8Array]",O="[object Uint8ClampedArray]",I="[object Uint16Array]",L="[object Uint32Array]",Ae=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,xt=/^(?:0|[1-9]\d*)$/,B={};B[Ve]=B[x]=B[_]=B[X]=B[le]=B[A]=B[O]=B[I]=B[L]=!0,B[E]=B[y]=B[ke]=B[u]=B[Ke]=B[g]=B[m]=B[w]=B[M]=B[W]=B[N]=B[Ce]=B[$]=B[C]=B[ye]=!1;var bt=typeof U.commonjsGlobal=="object"&&U.commonjsGlobal&&U.commonjsGlobal.Object===Object&&U.commonjsGlobal,d=typeof self=="object"&&self&&self.Object===Object&&self,h=bt||d||Function("return this")(),l=r&&!r.nodeType&&r,t=l&&!0&&e&&!e.nodeType&&e,f=t&&t.exports===l,R=f&&bt.process,P=function(){try{return R&&R.binding&&R.binding("util")}catch{}}(),z=P&&P.isTypedArray;function H(i,a){for(var p=-1,T=i==null?0:i.length,J=0,j=[];++p<T;){var te=i[p];a(te,p,i)&&(j[J++]=te)}return j}function D(i,a){for(var p=-1,T=a.length,J=i.length;++p<T;)i[J+p]=a[p];return i}function K(i,a){for(var p=-1,T=i==null?0:i.length;++p<T;)if(a(i[p],p,i))return!0;return!1}function Re(i,a){for(var p=-1,T=Array(i);++p<i;)T[p]=a(p);return T}function he(i){return function(a){return i(a)}}function Pe(i,a){return i.has(a)}function pe(i,a){return i==null?void 0:i[a]}function de(i){var a=-1,p=Array(i.size);return i.forEach(function(T,J){p[++a]=[J,T]}),p}function ie(i,a){return function(p){return i(a(p))}}function re(i){var a=-1,p=Array(i.size);return i.forEach(function(T){p[++a]=T}),p}var Z=Array.prototype,q=Function.prototype,G=Object.prototype,se=h["__core-js_shared__"],_e=q.toString,F=G.hasOwnProperty,Ne=function(){var i=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),ze=G.toString,Ge=RegExp("^"+_e.call(F).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=f?h.Buffer:void 0,Ue=h.Symbol,Ye=h.Uint8Array,Ze=G.propertyIsEnumerable,st=Z.splice,Fe=Ue?Ue.toStringTag:void 0,ct=Object.getOwnPropertySymbols,mt=$e?$e.isBuffer:void 0,At=ie(Object.keys,Object),oe=gt(h,"DataView"),Q=gt(h,"Map"),fe=gt(h,"Promise"),ae=gt(h,"Set"),ce=gt(h,"WeakMap"),ee=gt(Object,"create"),xe=lt(oe),me=lt(Q),ve=lt(fe),we=lt(ae),Ee=lt(ce),be=Ue?Ue.prototype:void 0,ue=be?be.valueOf:void 0;function k(i){var a=-1,p=i==null?0:i.length;for(this.clear();++a<p;){var T=i[a];this.set(T[0],T[1])}}function Se(){this.__data__=ee?ee(null):{},this.size=0}function Oe(i){var a=this.has(i)&&delete this.__data__[i];return this.size-=a?1:0,a}function sn(i){var a=this.__data__;if(ee){var p=a[i];return p===c?void 0:p}return F.call(a,i)?a[i]:void 0}function on(i){var a=this.__data__;return ee?a[i]!==void 0:F.call(a,i)}function fn(i,a){var p=this.__data__;return this.size+=this.has(i)?0:1,p[i]=ee&&a===void 0?c:a,this}k.prototype.clear=Se,k.prototype.delete=Oe,k.prototype.get=sn,k.prototype.has=on,k.prototype.set=fn;function tt(i){var a=-1,p=i==null?0:i.length;for(this.clear();++a<p;){var T=i[a];this.set(T[0],T[1])}}function an(){this.__data__=[],this.size=0}function cn(i){var a=this.__data__,p=Pt(a,i);if(p<0)return!1;var T=a.length-1;return p==T?a.pop():st.call(a,p,1),--this.size,!0}function un(i){var a=this.__data__,p=Pt(a,i);return p<0?void 0:a[p][1]}function ln(i){return Pt(this.__data__,i)>-1}function hn(i,a){var p=this.__data__,T=Pt(p,i);return T<0?(++this.size,p.push([i,a])):p[T][1]=a,this}tt.prototype.clear=an,tt.prototype.delete=cn,tt.prototype.get=un,tt.prototype.has=ln,tt.prototype.set=hn;function ut(i){var a=-1,p=i==null?0:i.length;for(this.clear();++a<p;){var T=i[a];this.set(T[0],T[1])}}function dn(){this.size=0,this.__data__={hash:new k,map:new(Q||tt),string:new k}}function bn(i){var a=jt(this,i).delete(i);return this.size-=a?1:0,a}function gn(i){return jt(this,i).get(i)}function yn(i){return jt(this,i).has(i)}function pn(i,a){var p=jt(this,i),T=p.size;return p.set(i,a),this.size+=p.size==T?0:1,this}ut.prototype.clear=dn,ut.prototype.delete=bn,ut.prototype.get=gn,ut.prototype.has=yn,ut.prototype.set=pn;function Rt(i){var a=-1,p=i==null?0:i.length;for(this.__data__=new ut;++a<p;)this.add(i[a])}function _n(i){return this.__data__.set(i,c),this}function xn(i){return this.__data__.has(i)}Rt.prototype.add=Rt.prototype.push=_n,Rt.prototype.has=xn;function ot(i){var a=this.__data__=new tt(i);this.size=a.size}function mn(){this.__data__=new tt,this.size=0}function vn(i){var a=this.__data__,p=a.delete(i);return this.size=a.size,p}function wn(i){return this.__data__.get(i)}function En(i){return this.__data__.has(i)}function Sn(i,a){var p=this.__data__;if(p instanceof tt){var T=p.__data__;if(!Q||T.length<n-1)return T.push([i,a]),this.size=++p.size,this;p=this.__data__=new ut(T)}return p.set(i,a),this.size=p.size,this}ot.prototype.clear=mn,ot.prototype.delete=vn,ot.prototype.get=wn,ot.prototype.has=En,ot.prototype.set=Sn;function On(i,a){var p=Ct(i),T=!p&&Hn(i),J=!p&&!T&&Wt(i),j=!p&&!T&&!J&&gr(i),te=p||T||J||j,Ie=te?Re(i.length,String):[],je=Ie.length;for(var V in i)F.call(i,V)&&!(te&&(V=="length"||J&&(V=="offset"||V=="parent")||j&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||Nn(V,je)))&&Ie.push(V);return Ie}function Pt(i,a){for(var p=i.length;p--;)if(lr(i[p][0],a))return p;return-1}function In(i,a,p){var T=a(i);return Ct(i)?T:D(T,p(i))}function vt(i){return i==null?i===void 0?et:Y:Fe&&Fe in Object(i)?Cn(i):Un(i)}function fr(i){return wt(i)&&vt(i)==E}function ar(i,a,p,T,J){return i===a?!0:i==null||a==null||!wt(i)&&!wt(a)?i!==i&&a!==a:Tn(i,a,p,T,ar,J)}function Tn(i,a,p,T,J,j){var te=Ct(i),Ie=Ct(a),je=te?y:ft(i),V=Ie?y:ft(a);je=je==E?N:je,V=V==E?N:V;var Je=je==N,Xe=V==N,Be=je==V;if(Be&&Wt(i)){if(!Wt(a))return!1;te=!0,Je=!1}if(Be&&!Je)return j||(j=new ot),te||gr(i)?cr(i,a,p,T,J,j):Pn(i,a,je,p,T,J,j);if(!(p&o)){var We=Je&&F.call(i,"__wrapped__"),qe=Xe&&F.call(a,"__wrapped__");if(We||qe){var at=We?i.value():i,rt=qe?a.value():a;return j||(j=new ot),J(at,rt,p,T,j)}}return Be?(j||(j=new ot),jn(i,a,p,T,J,j)):!1}function Ln(i){if(!br(i)||Dn(i))return!1;var a=hr(i)?Ge:ne;return a.test(lt(i))}function An(i){return wt(i)&&dr(i.length)&&!!B[vt(i)]}function Rn(i){if(!zn(i))return At(i);var a=[];for(var p in Object(i))F.call(i,p)&&p!="constructor"&&a.push(p);return a}function cr(i,a,p,T,J,j){var te=p&o,Ie=i.length,je=a.length;if(Ie!=je&&!(te&&je>Ie))return!1;var V=j.get(i);if(V&&j.get(a))return V==a;var Je=-1,Xe=!0,Be=p&b?new Rt:void 0;for(j.set(i,a),j.set(a,i);++Je<Ie;){var We=i[Je],qe=a[Je];if(T)var at=te?T(qe,We,Je,a,i,j):T(We,qe,Je,i,a,j);if(at!==void 0){if(at)continue;Xe=!1;break}if(Be){if(!K(a,function(rt,ht){if(!Pe(Be,ht)&&(We===rt||J(We,rt,p,T,j)))return Be.push(ht)})){Xe=!1;break}}else if(!(We===qe||J(We,qe,p,T,j))){Xe=!1;break}}return j.delete(i),j.delete(a),Xe}function Pn(i,a,p,T,J,j,te){switch(p){case Ke:if(i.byteLength!=a.byteLength||i.byteOffset!=a.byteOffset)return!1;i=i.buffer,a=a.buffer;case ke:return!(i.byteLength!=a.byteLength||!j(new Ye(i),new Ye(a)));case u:case g:case W:return lr(+i,+a);case m:return i.name==a.name&&i.message==a.message;case Ce:case C:return i==a+"";case M:var Ie=de;case $:var je=T&o;if(Ie||(Ie=re),i.size!=a.size&&!je)return!1;var V=te.get(i);if(V)return V==a;T|=b,te.set(i,a);var Je=cr(Ie(i),Ie(a),T,J,j,te);return te.delete(i),Je;case Me:if(ue)return ue.call(i)==ue.call(a)}return!1}function jn(i,a,p,T,J,j){var te=p&o,Ie=ur(i),je=Ie.length,V=ur(a),Je=V.length;if(je!=Je&&!te)return!1;for(var Xe=je;Xe--;){var Be=Ie[Xe];if(!(te?Be in a:F.call(a,Be)))return!1}var We=j.get(i);if(We&&j.get(a))return We==a;var qe=!0;j.set(i,a),j.set(a,i);for(var at=te;++Xe<je;){Be=Ie[Xe];var rt=i[Be],ht=a[Be];if(T)var yr=te?T(ht,rt,Be,a,i,j):T(rt,ht,Be,i,a,j);if(!(yr===void 0?rt===ht||J(rt,ht,p,T,j):yr)){qe=!1;break}at||(at=Be=="constructor")}if(qe&&!at){var Mt=i.constructor,Nt=a.constructor;Mt!=Nt&&"constructor"in i&&"constructor"in a&&!(typeof Mt=="function"&&Mt instanceof Mt&&typeof Nt=="function"&&Nt instanceof Nt)&&(qe=!1)}return j.delete(i),j.delete(a),qe}function ur(i){return In(i,$n,Mn)}function jt(i,a){var p=i.__data__;return Bn(a)?p[typeof a=="string"?"string":"hash"]:p.map}function gt(i,a){var p=pe(i,a);return Ln(p)?p:void 0}function Cn(i){var a=F.call(i,Fe),p=i[Fe];try{i[Fe]=void 0;var T=!0}catch{}var J=ze.call(i);return T&&(a?i[Fe]=p:delete i[Fe]),J}var Mn=ct?function(i){return i==null?[]:(i=Object(i),H(ct(i),function(a){return Ze.call(i,a)}))}:Fn,ft=vt;(oe&&ft(new oe(new ArrayBuffer(1)))!=Ke||Q&&ft(new Q)!=M||fe&&ft(fe.resolve())!=Le||ae&&ft(new ae)!=$||ce&&ft(new ce)!=ye)&&(ft=function(i){var a=vt(i),p=a==N?i.constructor:void 0,T=p?lt(p):"";if(T)switch(T){case xe:return Ke;case me:return M;case ve:return Le;case we:return $;case Ee:return ye}return a});function Nn(i,a){return a=a??S,!!a&&(typeof i=="number"||xt.test(i))&&i>-1&&i%1==0&&i<a}function Bn(i){var a=typeof i;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?i!=="__proto__":i===null}function Dn(i){return!!Ne&&Ne in i}function zn(i){var a=i&&i.constructor,p=typeof a=="function"&&a.prototype||G;return i===p}function Un(i){return ze.call(i)}function lt(i){if(i!=null){try{return _e.call(i)}catch{}try{return i+""}catch{}}return""}function lr(i,a){return i===a||i!==i&&a!==a}var Hn=fr(function(){return arguments}())?fr:function(i){return wt(i)&&F.call(i,"callee")&&!Ze.call(i,"callee")},Ct=Array.isArray;function Kn(i){return i!=null&&dr(i.length)&&!hr(i)}var Wt=mt||Jn;function Gn(i,a){return ar(i,a)}function hr(i){if(!br(i))return!1;var a=vt(i);return a==w||a==v||a==s||a==ge}function dr(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=S}function br(i){var a=typeof i;return i!=null&&(a=="object"||a=="function")}function wt(i){return i!=null&&typeof i=="object"}var gr=z?he(z):An;function $n(i){return Kn(i)?On(i):Rn(i)}function Fn(){return[]}function Jn(){return!1}e.exports=Gn})($t,$t.exports);var oo=$t.exports;const fo=U.getDefaultExportFromCjs(oo);function ao(e,r){return r=r||{},new Promise(function(n,c){var o=new XMLHttpRequest,b=[],S=[],E={},y=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:y,headers:{keys:function(){return b},entries:function(){return S},get:function(u){return E[u.toLowerCase()]},has:function(u){return u.toLowerCase()in E}}}};for(var s in o.open(r.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(u,g,m){b.push(g=g.toLowerCase()),S.push([g,m]),E[g]=E[g]?E[g]+","+m:m}),n(y())},o.onerror=c,o.withCredentials=r.credentials=="include",r.headers)o.setRequestHeader(s,r.headers[s]);o.send(r.body||null)})}const co=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),Cr=U.getAugmentedNamespace(co);var uo=self.fetch||(self.fetch=Cr.default||Cr);const lo=U.getDefaultExportFromCjs(uo);exports.A=Fi;exports.C=kn;exports.E=Ki;exports.Gi=fo;exports.IEvents=di;exports.Yi=lo;exports.clear=ui;exports.concat=Nr;exports.createStorage=oi;exports.createStore=Ur;exports.del=ci;exports.encodeIss=Wr;exports.f=so;exports.formatJsonRpcError=Qr;exports.formatJsonRpcRequest=Us;exports.formatJsonRpcResult=Hs;exports.fromString=Ft;exports.generateKeyPair=os;exports.get=fi;exports.getBigIntRpcId=zs;exports.isHttpUrl=qs;exports.isJsonRpcError=nn;exports.isJsonRpcRequest=Ys;exports.isJsonRpcResponse=Xs;exports.isJsonRpcResult=rn;exports.k=Di;exports.keys=hi;exports.ot=rr;exports.parseConnectionError=Yr;exports.payloadId=or;exports.r=Fs;exports.set=ai;exports.signJWT=fs;exports.toString=Jt;exports.y=$r;
